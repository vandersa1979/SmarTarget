
<!DOCTYPE html>
<html>
<head>
    <title>Vínculo OKR x KPI</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
        }
        .sidebar {
            width: 250px;
            background-color: #003366;
            color: white;
            height: 100vh;
            padding-top: 20px;
            position: fixed;
        }
        .sidebar img {
            width: 200px;
            display: block;
            margin: 0 auto 20px auto;
        }
        .sidebar a {
            display: block;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
        }
        .sidebar a:hover {
            background-color: #0055a5;
        }
        .content {
            margin-left: 250px;
            padding: 20px;
            flex-grow: 1;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <img src="logo.jpg" alt="SmartTarget Logo">
        <a href="home.html">Início</a>
        <a href="usuarios.html">Usuários</a>
        <a href="empresas.html">Empresas</a>
        <a href="departamentos.html">Departamentos</a>
        <a href="cargos.html">Cargos</a>
        <a href="okrs.html">OKRs</a>
        <a href="kpis.html">KPIs</a>
        <a href="vinculos.html">Vincular OKRs x KPIs</a>
        <a href="relatorio_departamento.html">Relatório por Departamento</a>
        <a href="relatorio_pessoa.html">Relatório por Pessoa</a>
    </div>
    <div class="content">
        <h2>Vínculo OKR x KPI</h2>
        
    <label for="okr">Selecione o OKR:</label>
    <select id="okr"></select>

    <label for="kpi">Selecione o KPI:</label>
    <select id="kpi"></select>

    <button onclick="salvar()">Salvar Vínculo</button>
    <div id="dados" style="margin-top: 20px;"></div>
    
    </div>
</body>
</html>

<script>
    function carregarCombos() {
        let okrs = JSON.parse(localStorage.getItem('OKRs') || '[]');
        let kpis = JSON.parse(localStorage.getItem('KPIs') || '[]');

        let okrSelect = document.getElementById("okr");
        let kpiSelect = document.getElementById("kpi");

        okrSelect.innerHTML = '';
        kpiSelect.innerHTML = '';

        okrs.forEach(o => {
            if (o.Objetivo) {
                let opt = document.createElement("option");
                opt.value = o.Objetivo;
                opt.text = o.Objetivo;
                okrSelect.appendChild(opt);
            }
        });

        kpis.forEach(k => {
            if (k.Meta) {
                let opt = document.createElement("option");
                opt.value = k.Meta;
                opt.text = k.Meta;
                kpiSelect.appendChild(opt);
            }
        });
    }

    function salvar() {
        let registros = JSON.parse(localStorage.getItem('Vínculo OKR x KPI') || '[]');
        let novo = {
            OKR: document.getElementById("okr").value,
            KPI: document.getElementById("kpi").value
        };
        registros.push(novo);
        localStorage.setItem('Vínculo OKR x KPI', JSON.stringify(registros));
        alert("Vínculo salvo com sucesso!");
        listar();
    }

    function listar() {
        let registros = JSON.parse(localStorage.getItem('Vínculo OKR x KPI') || '[]');
        let container = document.getElementById('dados');
        container.innerHTML = '';
        if (registros.length > 0) {
            let tabela = document.createElement('table');
            tabela.border = 1;
            tabela.style.borderCollapse = 'collapse';
            tabela.style.marginTop = '10px';

            let head = tabela.insertRow();
            head.insertCell().innerText = "OKR";
            head.insertCell().innerText = "KPI";

            registros.forEach(r => {
                let row = tabela.insertRow();
                row.insertCell().innerText = r.OKR;
                row.insertCell().innerText = r.KPI;
            });
            container.appendChild(tabela);
        } else {
            container.innerHTML = "<i>Nenhum vínculo cadastrado</i>";
        }
    }

    window.onload = function() {
        carregarCombos();
        listar();
    };
</script>
